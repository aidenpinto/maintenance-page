<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintenance Page</title>

    <!-- Favicon and Icons -->
    <link rel="icon" type="image/x-icon" href="static/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="static/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="static/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="static/apple-touch-icon.png">

    <!-- Styles -->
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            transition: background-image 0.5s ease; /* Faster transition */
        }

        #message {
            text-align: center;
            color: #000;
            padding: 20px;
            border-radius: 10px;
            background-color: white;
            display: inline-block;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background 0.5s ease;
            max-width: 400px;
            width: 100%;
        }

        #photo-credit {
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }

        #photo-credit a {
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
        }

        #photo-credit a:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div id="message">
        <h1>Under Maintenance</h1>
        <p>We apologize for the inconvenience. The site is currently undergoing maintenance.</p>
        <p id="photo-credit"></p>
    </div>

    <!-- JavaScript -->
    <script defer>
        document.addEventListener('DOMContentLoaded', async () => {
            const apiKey = 'Paste-Your-Unsplash_APIKey-Here';
            const query = 'nature'; // Adjust the query to get relevant images

            // Fetch a random image from Unsplash
            async function fetchRandomImage() {
                const url = `https://api.unsplash.com/photos/random?query=${query}&client_id=${apiKey}`;
                const response = await fetch(url);
                const data = await response.json();
                return {
                    imageUrl: data.urls.full,
                    photographerName: data.user.name,
                    photographerUsername: data.user.username,
                    unsplashLink: data.links.html
                };
            }

            // Set background with a random image
            async function setRandomBackground() {
                const { imageUrl, photographerName, photographerUsername, unsplashLink } = await fetchRandomImage();

                // Preload the Unsplash image
                const preloadLink = document.createElement('link');
                preloadLink.rel = 'preload';
                preloadLink.href = imageUrl;
                preloadLink.as = 'image';
                preloadLink.type = 'image/jpeg'; // Adjust the image type
                preloadLink.crossOrigin = 'anonymous'; // Ensure proper caching
                document.head.appendChild(preloadLink);

                // Create an image element
                const unsplashImage = new Image();
                unsplashImage.src = imageUrl;
                unsplashImage.alt = `Photo by ${photographerName} (@${photographerUsername}) on Unsplash`;
                unsplashImage.loading = 'lazy';
                unsplashImage.crossOrigin = 'anonymous'; // Ensure proper caching

                // Set the background image
                document.body.style.backgroundImage = `url('${imageUrl}')`;

                // Display photo credit
                const photoCreditElement = document.getElementById('photo-credit');
                photoCreditElement.innerHTML = `Photo by <a href="${unsplashLink}" target="_blank">${photographerName} (@${photographerUsername})</a> on Unsplash`;
            }

            setRandomBackground();

            // Update background when the page is being unloaded (e.g., before a refresh)
            window.addEventListener('beforeunload', () => {
                setRandomBackground();
            });
        });
    </script>
</body>

</html>
